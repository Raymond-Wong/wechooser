{% extends 'customize/widgets/base.html' %}

{% block style %}
<link type="text/css" rel="stylesheet" href="/static/plugin/DataTables/datatables/css/jquery.dataTables.min.css">
<link type="text/css" rel="stylesheet" href="/static/plugin/DataTables/tabletools/css/dataTables.tableTools.min.css">
<link rel="stylesheet" type="text/css" href="/static/plugin/datetimepicker/jquery.datetimepicker.css"/>
<link rel="stylesheet" type="text/css" href="/static/plugin/datetimepicker/jquery.datetimepicker.css"/>
<link type="text/css" rel="stylesheet" href="/static/duiba/css/checkCreditRecords.css">
<link type="text/css" rel="stylesheet" href="/static/customize/css/task_list.css">
{% endblock %}

{% block page %}
<div class="pageWrapper">
<div class="checkTypeBox">
  <a class="left checkType" href="/task/add">添加任务</a>
  <a class="left checkType active" href="#">查看任务</a>
  <div class="clear"></div>
</div>
<div class="borderBox">
  <div class="optionBox">
    过滤条件：
    <font class="optionName">任务状态&nbsp;-</font>
    <select id="taskStatusChooser">
      <option value="0">全部</option>
      <option value="1">待执行</option>
      <option value="2">成功</option>
      <option value="4">失败</option>
      <option value="3">取消</option>
    </select>
  </div>
  <div class="taskTableBox">
  <table id="taskTable" class="table table-striped" cellspacing="0" width="100%">
    <thead>
      <tr>
        <td>创建时间</td>
        <td>任务名称</td>
        <td>运行时间</td>
        <td>模板标题</td>
        <td>状态</td>
        <td>操作</td>
      </tr>
    </thead>
    <tbody>
      {% for task in tasks %}
      <tr tid="{{ task.id }}">
        <td>{{ task.create_time | date:"Y-m-d H:i:s" }}</td>
        <td>{{ task.task_name }}</td>
        <td>{{ task.run_time | date:"Y-m-d H:i:s" }}</td>
        <td>{{ task.template_name }}</td>
        <td class="statusCol">{{ task.get_status_display  }}</td>
        <td class="cancelCol">
        {% ifequal task.status 0 %}
          <a class="cancelBtn">取消</a>
        {% else %}
          --
        {% endifequal %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
</div>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript" src="/static/plugin/DataTables/datatables/js/jquery.dataTables.js" charset="utf-8"></script>
<script type="text/javascript" src="/static/plugin/DataTables/tabletools/js/dataTables.tableTools.js" charset="utf-8"></script>
<script type="text/javascript" src="/static/plugin/datetimepicker/jquery.datetimepicker.full.js"></script>
<script type="text/javascript" src="/static/customize/js/task_list.js"></script>
{% endblock %}